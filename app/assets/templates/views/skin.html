<!-- SKIN VIEW -->
<div id="view-skin" class="view-section hidden w-full max-w-4xl text-left">
    <h2 class="text-3xl font-bold text-white mb-2" data-i18n="skin">Skin System</h2>
    <p class="text-theme-secondary mb-4" data-i18n="skin_desc">Manage your Ely.by account and skin</p>

    <!-- Microsoft Premium Notice -->
    <div id="skin-microsoft-notice" class="hidden bg-blue-900/50 rounded-xl p-6 border border-blue-500/50 text-center">
        <svg class="w-16 h-16 text-blue-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z">
            </path>
        </svg>
        <h3 class="text-xl font-bold text-white mb-2">Premium Account</h3>
        <p class="text-blue-200 mb-4">You are logged in with a Microsoft Premium account. Your original Minecraft skin
            will be used automatically.</p>
        <p class="text-sm text-blue-300">To use Ely.by skins instead, please logout from Microsoft first.</p>
        <button onclick="handleLogout()"
            class="mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">
            Logout from Microsoft
        </button>
    </div>

    <!-- Not Logged In State (Ely.by Login) -->
    <div id="skin-login-container" class="bg-theme-secondary/80 rounded-xl p-6 border border-theme">
        <div class="text-center mb-6">
            <h3 class="text-xl font-bold text-white mb-2" data-i18n="elyby_login_title">Login with Ely.by</h3>
            <p class="text-sm text-theme-secondary" data-i18n="elyby_login_desc">Access your skins and capes</p>
        </div>

        <form id="elyby-login-form" onsubmit="handleElybyLogin(event)" class="space-y-4 max-w-sm mx-auto">
            <div>
                <label class="block text-xs font-medium text-theme-secondary mb-1"
                    data-i18n="elyby_username_label">Username or Email</label>
                <input type="text" id="elyby-username" required
                    class="w-full bg-theme-tertiary border border-theme rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none transition-colors">
            </div>

            <div>
                <label class="block text-xs font-medium text-theme-secondary mb-1"
                    data-i18n="elyby_password_label">Password</label>
                <input type="password" id="elyby-password" required
                    class="w-full bg-theme-tertiary border border-theme rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none transition-colors">
            </div>

            <div id="elyby-2fa-container" class="hidden">
                <label class="block text-xs font-medium text-theme-secondary mb-1" data-i18n="elyby_2fa_label">2FA
                    Code</label>
                <input type="text" id="elyby-2fa" placeholder="000000"
                    class="w-full bg-theme-tertiary border border-theme rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none transition-colors">
            </div>

            <div id="elyby-login-error" class="text-red-500 text-sm hidden text-center"></div>

            <button type="submit" id="elyby-login-btn"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                <span data-i18n="elyby_login_btn">Login</span>
                <div
                    class="loading-spinner w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin hidden">
                </div>
            </button>
        </form>

        <div class="mt-6 text-center text-sm text-theme-secondary">
            <span data-i18n="elyby_no_account">Don't have an account?</span>
            <a href="#" onclick="pywebview.api.open_url('https://ely.by/register')"
                class="text-blue-400 hover:underline" data-i18n="elyby_register">Register on Ely.by</a>
        </div>
    </div>

    <!-- Logged In State (Ely.by) -->
    <div id="skin-profile-container" class="hidden">
        <div class="bg-theme-secondary/80 rounded-xl p-4 border border-theme mb-4">
            <div class="flex items-center justify-between">
                <div>
                    <h3 class="text-xl font-bold text-white mb-1" id="profile-username">Player</h3>
                    <p class="text-xs font-mono text-theme-secondary" id="profile-uuid">UUID: ...</p>
                </div>

                <button onclick="handleElybyLogout()"
                    class="px-4 py-2 border border-red-500/50 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm font-medium"
                    data-i18n="elyby_logout">
                    Logout
                </button>
            </div>
        </div>

        <div class="bg-theme-secondary/80 rounded-xl p-6 border border-theme text-center">
            <svg class="w-16 h-16 text-blue-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            <h3 class="text-xl font-bold text-white mb-2" data-i18n="manage_skin_title">Manage Your Skin</h3>
            <p class="text-theme-secondary mb-6" data-i18n="manage_skin_desc">Click the button below to open Ely.by in
                your browser and manage your skins and capes.</p>

            <button onclick="pywebview.api.open_url('https://ely.by/skins')"
                class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2 mx-auto">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14">
                    </path>
                </svg>
                <span data-i18n="open_elyby_manager">Open Ely.by Skin Manager</span>
            </button>

            <p class="text-xs text-theme-secondary mt-4" data-i18n="skin_launch_note">After changing your skin on
                Ely.by, just launch the game to see your new skin!</p>
        </div>
    </div>
</div>